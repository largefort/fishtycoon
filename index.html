<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Idle Fishing Tycoon</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script type="importmap">
    {
      "imports": {
        "vue": "https://unpkg.com/vue@3/dist/vue.esm-browser.js"
      }
    }
    </script>
</head>
<body>
    <div id="app">
        <header>
            <h1>Idle Fishing Tycoon</h1>
            <div class="currency">
                <span class="currency-icon">üí∞</span>
                <span>${{ formatNumber(money) }}</span>
            </div>
        </header>
        
        <main>
            <div class="game-container">
                <div class="fishing-area">
                    <div class="water">
                        <div v-if="autoFishingActive" class="auto-fishing-indicator">
                            <div class="blink"></div>
                            <span>Auto-Fishing Active</span>
                        </div>
                        <div class="boat" :style="{ left: `${boatPosition}%` }">
                            <svg width="140" height="70" viewBox="0 0 140 70">
                                <defs>
                                    <linearGradient id="boatGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                        <stop offset="0%" stop-color="#A5744E" />
                                        <stop offset="100%" stop-color="#6B4226" />
                                    </linearGradient>
                                </defs>
                                <path d="M 20,40 Q 70,10 120,40 L 110,55 L 30,55 Z" fill="url(#boatGradient)" />
                                <rect x="65" y="15" width="10" height="25" fill="#8B5A2B" />
                                <circle cx="70" cy="12" r="7" fill="#8B4513" />
                                <path d="M 70,12 L 95,2 L 95,35 L 70,12 Z" fill="#FFFFFF" stroke="#DDDDDD" stroke-width="1" />
                                <rect x="25" y="42" width="90" height="2" fill="#5D4037" />
                                <rect x="40" y="40" width="60" height="4" fill="#795548" rx="1" ry="1" />
                            </svg>
                            <div class="fishing-line" v-if="isFishing" :style="{ height: `${lineLength}px` }"></div>
                            <div v-if="showSplash" class="fishing-splash" :style="{ left: '50%', top: `${lineLength}px` }"></div>
                        </div>
                        
                        <template v-for="fish in fishInWater" :key="fish.id">
                            <div class="fish" :style="{ left: `${fish.position}%`, top: `${fish.depth}%`, transform: `scaleX(${fish.direction})` }">
                                <svg width="30" height="15" viewBox="0 0 30 15">
                                    <path d="M 5,7.5 Q 10,0 20,7.5 Q 10,15 5,7.5 Z" :fill="fish.color" />
                                    <circle cx="22" cy="7.5" r="1.5" fill="black" />
                                    <path d="M 5,7.5 L 0,10 L 0,5 Z" :fill="fish.color" />
                                </svg>
                            </div>
                        </template>
                    </div>
                    
                    <div class="controls">
                        <button @click="startFishing" :disabled="isFishing">
                            {{ isFishing ? 'Fishing...' : 'Cast Line' }}
                        </button>
                    </div>
                </div>
                
                <div class="info-panel">
                    <div class="stats">
                        <h2>Fishing Stats</h2>
                        <div class="stat-item">
                            <div class="stat-label">
                                <span class="stat-icon">üé£</span>
                                <span>Total Fish Caught</span>
                            </div>
                            <div class="stat-value">{{ formatNumber(totalFishCaught) }}</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">
                                <span class="stat-icon">üîå</span>
                                <span>Fishing Power</span>
                            </div>
                            <div class="stat-value">{{ fishingPower }} fish/cast</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">
                                <span class="stat-icon">‚è±Ô∏è</span>
                                <span>Auto-Fishing</span>
                            </div>
                            <div class="stat-value">{{ autoFishingRate }}/second</div>
                        </div>
                    </div>
                    
                    <div class="inventory">
                        <h2>Fish Inventory</h2>
                        <div v-for="(count, type) in inventory" :key="type" class="inventory-item">
                            <div class="fish-info">
                                <div class="fish-icon">
                                    <svg width="30" height="15" viewBox="0 0 30 15">
                                        <path d="M 5,7.5 Q 10,0 20,7.5 Q 10,15 5,7.5 Z" :fill="getFishColor(type)" />
                                        <circle cx="22" cy="7.5" r="1.5" fill="black" />
                                        <path d="M 5,7.5 L 0,10 L 0,5 Z" :fill="getFishColor(type)" />
                                    </svg>
                                </div>
                                <span>{{ type }}: <strong>{{ count }}</strong></span>
                            </div>
                            <button @click="sellFish(type)">Sell All</button>
                        </div>
                        <div v-if="Object.keys(inventory).length === 0" class="inventory-empty">
                            <p>No fish caught yet. Start fishing!</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="upgrades">
                <h2>Upgrades</h2>
                <div class="upgrade-list">
                    <div v-for="upgrade in upgrades" :key="upgrade.id" class="upgrade-item">
                        <div class="upgrade-info">
                            <h3>{{ upgrade.name }}</h3>
                            <p>{{ upgrade.description }}</p>
                            <div class="upgrade-level">
                                <span>Level {{ upgrade.level }}</span>
                                <div class="level-bar">
                                    <div class="level-progress" :style="{width: `${upgrade.maxLevel ? (upgrade.level / upgrade.maxLevel) * 100 : (upgrade.level <= 10 ? upgrade.level * 10 : 100)}%`}"></div>
                                </div>
                                <span>{{ upgrade.maxLevel || '‚àû' }}</span>
                            </div>
                            <p><strong>Cost: ${{ formatNumber(upgrade.cost) }}</strong></p>
                        </div>
                        <button @click="purchaseUpgrade(upgrade.id)" :disabled="money < upgrade.cost || (upgrade.maxLevel && upgrade.level >= upgrade.maxLevel)">
                            {{ money < upgrade.cost ? 'Need more money' : (upgrade.maxLevel && upgrade.level >= upgrade.maxLevel) ? 'Maxed Out' : 'Upgrade' }}
                        </button>
                    </div>
                </div>
            </div>
        </main>
        
        <footer>
            <p>Idle Fishing Tycoon - Reel in riches and build your fishing empire!</p>
        </footer>
    </div>
    
    <script type="module" src="app.js"></script>
</body>
</html>